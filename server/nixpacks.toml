# Nixpacks configuration for Railway
# Tüm paketler nixPkgs ile kuruluyor - çakışmayı önlemek için providers kullanmıyoruz

providers = []

[phases.setup]
# Node.js 20, Python (full with venv) ve FFmpeg nixPkgs ile kuruluyor
# pip virtual environment içinde kurulacak
nixPkgs = ["pkgs.nodejs_20", "pkgs.python3Full", "pkgs.ffmpeg"]

[phases.install]
cmds = [
  "python3 -m venv /app/venv",
  "/app/venv/bin/pip install yt-dlp",
  "export PATH=/app/venv/bin:$PATH",
  "npm install --omit=dev"
]

[phases.build]
cmds = []

[start]
cmd = "export PATH=/app/venv/bin:$PATH && npm start"






