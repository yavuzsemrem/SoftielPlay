# Nixpacks configuration for Railway
# Tüm paketler nixPkgs ile kuruluyor - çakışmayı önlemek için providers kullanmıyoruz

providers = []

[phases.setup]
# Node.js 20, Python, pip, curl ve FFmpeg nixPkgs ile kuruluyor
nixPkgs = ["pkgs.nodejs_20", "pkgs.python3", "pkgs.python3Packages.pip", "pkgs.curl", "pkgs.ffmpeg"]

[phases.install]
cmds = [
  "npm ci --omit=dev",
  "curl -sSL https://bootstrap.pypa.io/get-pip.py -o /tmp/get-pip.py && python3 /tmp/get-pip.py --user",
  "$HOME/.local/bin/pip install --user yt-dlp"
]

[phases.build]
cmds = []

[start]
cmd = "npm start"
